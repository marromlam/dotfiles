- defaults:
    link:
      create: true
      relink: true

- create:
    ~/.ssh:
      mode: 0600
    ~/.config:
    ~/projects:

- clean: ["~"]

- link:
    # ~/.dotfiles: ""
    ~/.ssh:
      force: true
      mode: 0600
      path: ~/.private/files/.ssh
    # ~/.gitignore: git/.gitignore
    ~/.gitconfig: files/.gitconfig
    ~/.gitmessage: files/.gitmessage
    ~/.tmux.conf: files/.tmux.conf
    ~/.bash_profile: files/.bash_profile
    ~/.bashrc: files/.bashrc
    ~/.zshrc: files/.zshrc
    ~/.sh_profile: files/.sh_profile
    ~/.rgignore: files/.rgignore
    ~/.config:
      force: true
      path: files/.config
    ~/.Brewfile:
      if: "[ `uname` = Darwin ]"
      path: homebrew/Brewfile
    ~/.Brewfile:
      if: "[ `uname` = Linux ]"
      path: homebrew/BrewfileLinux
    # ~/Library/Application Support/lazygit/config.yml:
    #   if: "[ `uname` = Darwin ]"
    #   path: .config/lazygit/config.yml

- shell:
    - [source scripts/reload_shell, Reload shell]
    - [brew bundle --file=~/.Brewfile, Install homebrew dependencies]
    - [git submodule update --init --recursive, Installing submodules]
    - [bash extra/macos_settings.sh, Installing macOS config]
    - [bash extra/keyboard.sh, Installing keyboard config]
    - [python3 -m pip install -r requirements.txt, Installing python packages]
    - [
        tmux start-server && tmux new-session -d && ~/.config/tmux/plugins/tpm/scripts/install_plugins.sh && tmux kill-server,
        Installing python packages,
      ]
    # - [source ~/.zshrc, Install fzf marks]
    - command: bash extra/nvim.sh #&> /dev/null
      stdin: true
      stdout: true
      stderr: true
      description: Installing neovim config
      quiet: true
    # - [cp -n ./git/config.template ~/.gitconfig.local]
